package no.hvl.dat107;

import java.util.List;
import java.util.Scanner;

public class Main {
    private static Scanner scanner = new Scanner(System.in);
    private static AnsattDAO ansattDAO = new AnsattDAO();
    private static AvdelingDAO avdelingDAO = new AvdelingDAO();
    private static ProsjektDAO prosjektDAO = new ProsjektDAO();

    public static void main(String[] args) {
        while (true) {
            System.out.println("\n游늷 MENY:");
            System.out.println("1. S칮k etter ansatt (ID)");
            System.out.println("2. S칮k etter ansatt (brukernavn)");
            System.out.println("3. List ut alle ansatte");
            System.out.println("4. Oppdater stilling/l칮nn");
            System.out.println("5. Legg til ny ansatt");
            System.out.println("6. S칮k etter avdeling (ID)");
            System.out.println("7. List ut ansatte i avdeling");
            System.out.println("8. Endre ansatts avdeling");
            System.out.println("9. Legg til ny avdeling");
            System.out.println("10. Legg til nytt prosjekt");
            System.out.println("11. Registrere prosjektdeltagelse");
            System.out.println("12. F칮re timer p친 prosjekt");
            System.out.println("13. Vis prosjektinfo");
            System.out.println("0. Avslutt");
            System.out.print("Velg et alternativ: ");
            
            int valg = scanner.nextInt();
            scanner.nextLine(); 

            switch (valg) {
                case 1 -> s칮kAnsattMedId();
                case 2 -> s칮kAnsattMedBrukernavn();
                case 3 -> listAlleAnsatte();
                case 4 -> oppdaterAnsatt();
                case 5 -> leggTilAnsatt();
                case 6 -> s칮kAvdeling();
                case 7 -> listAnsatteIAvdeling();
                case 8 -> endreAnsattAvdeling();
                case 9 -> leggTilAvdeling();
                case 10 -> leggTilProsjekt();
                case 11 -> registrerProsjektDeltagelse();
                case 12 -> f칮reTimerP친Prosjekt();
                case 13 -> visProsjektInfo();
                case 0 -> {
                    System.out.println("Avslutter programmet...");
                    System.exit(0);
                }
                default -> System.out.println("Ugyldig valg! Pr칮v igjen.");
            }
        }
    }

    private static void s칮kAnsattMedId() {
        System.out.print("Skriv inn ansatt-ID: ");
        int id = scanner.nextInt();
        scanner.nextLine();
        Ansatt ansatt = ansattDAO.finnAnsattMedId(id);
        System.out.println(ansatt != null ? ansatt : "Ingen ansatt funnet med ID " + id);
    }

    private static void s칮kAnsattMedBrukernavn() {
        System.out.print("Skriv inn brukernavn: ");
        String brukernavn = scanner.nextLine();
        Ansatt ansatt = ansattDAO.finnAnsattMedBrukernavn(brukernavn);
        System.out.println(ansatt != null ? ansatt : "Ingen ansatt funnet med brukernavn " + brukernavn);
    }

    private static void listAlleAnsatte() {
        List<Ansatt> ansatte = ansattDAO.hentAlleAnsatte();
        ansatte.forEach(System.out::println);
    }

    private static void oppdaterAnsatt() {
        System.out.print("Skriv inn ansatt-ID: ");
        int id = scanner.nextInt();
        scanner.nextLine();
        System.out.print("Ny stilling: ");
        String stilling = scanner.nextLine();
        System.out.print("Ny l칮nn: ");
        int l칮nn = scanner.nextInt();
        scanner.nextLine();
        ansattDAO.oppdaterAnsatt(id, stilling, l칮nn);
        System.out.println("Oppdatert!");
    }

    private static void leggTilAnsatt() {
        System.out.print("Brukernavn: ");
        String brukernavn = scanner.nextLine();
        System.out.print("Fornavn: ");
        String fornavn = scanner.nextLine();
        System.out.print("Etternavn: ");
        String etternavn = scanner.nextLine();
        System.out.print("Ansettelsesdato (YYYY-MM-DD): ");
        String dato = scanner.nextLine();
        System.out.print("Stilling: ");
        String stilling = scanner.nextLine();
        System.out.print("M친nedsl칮nn: ");
        int l칮nn = scanner.nextInt();
        scanner.nextLine();
        System.out.print("Avdeling-ID: ");
        int avdelingId = scanner.nextInt();
        scanner.nextLine();
        ansattDAO.leggTilAnsatt(brukernavn, fornavn, etternavn, dato, stilling, l칮nn, avdelingId);
        System.out.println("Ny ansatt lagt til!");
    }

    private static void s칮kAvdeling() {
        System.out.print("Skriv inn avdeling-ID: ");
        int id = scanner.nextInt();
        scanner.nextLine();
        Avdeling avdeling = avdelingDAO.finnAvdelingMedId(id);
        System.out.println(avdeling != null ? avdeling : "Ingen avdeling funnet med ID " + id);
    }

    private static void listAnsatteIAvdeling() {
        System.out.print("Skriv inn avdeling-ID: ");
        int id = scanner.nextInt();
        scanner.nextLine();
        avdelingDAO.listAnsatteIAvdeling(id);
    }

    private static void endreAnsattAvdeling() {
        System.out.print("Ansatt-ID: ");
        int ansattId = scanner.nextInt();
        scanner.nextLine();
        System.out.print("Ny avdeling-ID: ");
        int avdelingId = scanner.nextInt();
        scanner.nextLine();
        ansattDAO.endreAvdeling(ansattId, avdelingId);
    }

    private static void leggTilAvdeling() {
        System.out.print("Navn p친 ny avdeling: ");
        String navn = scanner.nextLine();
        System.out.print("ID til sjefen for avdelingen: ");
        int sjefId = scanner.nextInt();
        scanner.nextLine();
        avdelingDAO.leggTilAvdeling(navn, sjefId);
    }

    private static void leggTilProsjekt() {
        System.out.print("Prosjektnavn: ");
        String navn = scanner.nextLine();
        System.out.print("Beskrivelse: ");
        String beskrivelse = scanner.nextLine();
        prosjektDAO.leggTilProsjekt(navn, beskrivelse);
    }

    private static void registrerProsjektDeltagelse() {
        System.out.print("Ansatt-ID: ");
        int ansattId = scanner.nextInt();
        System.out.print("Prosjekt-ID: ");
        int prosjektId = scanner.nextInt();
        scanner.nextLine();
        System.out.print("Rolle: ");
        String rolle = scanner.nextLine();
        prosjektDAO.leggTilDeltagelse(ansattId, prosjektId, rolle);
    }

    private static void f칮reTimerP친Prosjekt() {
        System.out.print("Ansatt-ID: ");
        int ansattId = scanner.nextInt();
        System.out.print("Prosjekt-ID: ");
        int prosjektId = scanner.nextInt();
        System.out.print("Antall timer: ");
        int timer = scanner.nextInt();
        prosjektDAO.f칮reTimer(ansattId, prosjektId, timer);
    }

    private static void visProsjektInfo() {
        System.out.print("Prosjekt-ID: ");
        int prosjektId = scanner.nextInt();
        scanner.nextLine();
        prosjektDAO.visProsjektInfo(prosjektId);
    }
}

